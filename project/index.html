<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Quiz Oyunu</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Overlay giriş ekranı -->
  <div id="overlay">
    <span id="typing"></span><span id="cursor">|</span>
  </div>

  <!-- Quiz kutusu -->
  <div id="quiz-container" class="quiz-container hidden">
    <h1>Quiz Oyunu</h1>

    <div id="progress-bar"><div id="progress-fill"></div></div>

    <div id="question" class="question"></div>
    <div id="options"></div>

    <button id="next-btn">Next Question</button>

    <div id="result"></div>
  </div>

  <!-- Özel imleç -->
  <div class="cursor-dot" id="cursor-dot"></div>

  <script>
    // Typing effect
    const typingEl = document.getElementById("typing");
    const overlay = document.getElementById("overlay");
    const quizContainer = document.getElementById("quiz-container");

    const texts = ["Click to start...", "Başlamak için tıklayın...", "Kliko me fillu..."];
    let textIndex = 0, charIndex = 0, deleting = false;

    function typeEffect() {
      const currentText = texts[textIndex];
      if (!deleting) {
        typingEl.textContent = currentText.substring(0, charIndex + 1);
        charIndex++;
        if (charIndex === currentText.length) {
          deleting = true;
          setTimeout(typeEffect, 900);
          return;
        }
      } else {
        typingEl.textContent = currentText.substring(0, Math.max(charIndex - 1, 0));
        charIndex = Math.max(charIndex - 1, 0);
        if (charIndex === 0) {
          deleting = false;
          textIndex = (textIndex + 1) % texts.length;
        }
      }
      setTimeout(typeEffect, deleting ? 90 : 140);
    }
    typeEffect();

    // Overlay fade-out: pointer-events kapat, sonra tamamen gizle
    overlay.addEventListener("click", () => {
      overlay.style.pointerEvents = "none";     // mouse olayları engellenmesin
      overlay.classList.add("fade-out");        // animasyonu başlat
      setTimeout(() => {
        overlay.style.display = "none";         // tamamen kaldır
        quizContainer.classList.remove("hidden");
        showQuestion();
      }, 1200); // CSS animasyon süresiyle senkron
    });

    // Quiz verileri
    const questions = [
      { q: "HTML açılımı nedir?", options: ["Hyper Text Markup Language", "Home Tool Markup Language", "Hyperlinks Text Management Language"], answer: 0 },
      { q: "CSS ne için kullanılır?", options: ["Veritabanı", "Stil", "Sunucu"], answer: 1 },
      { q: "JavaScript hangi amaçla kullanılır?", options: ["Dinamik davranış", "Resim düzenleme", "Veri saklama"], answer: 0 }
    ];

    let currentQuestion = 0;
    let score = 0;
    let answered = false;

    const questionEl = document.getElementById("question");
    const optionsEl = document.getElementById("options");
    const nextBtn = document.getElementById("next-btn");
    const resultEl = document.getElementById("result");
    const progressFill = document.getElementById("progress-fill");

    function showQuestion() {
      answered = false;
      const q = questions[currentQuestion];
      questionEl.textContent = q.q;
      optionsEl.innerHTML = "";

      q.options.forEach((opt, i) => {
        const optEl = document.createElement("div");
        optEl.textContent = opt;
        optEl.className = "option";
        optEl.addEventListener("click", () => {
          if (answered) return;
          answered = true;

          // doğru/yanlış işaretle
          if (i === q.answer) {
            score++;
            optEl.classList.add("correct");
          } else {
            optEl.classList.add("wrong");
          }

          // diğerlerini kilitle ve doğru cevabı göster
          Array.from(optionsEl.children).forEach((child, idx) => {
            child.style.pointerEvents = "none";
            if (idx === q.answer) child.classList.add("correct");
          });

          nextBtn.style.display = "block";
        });
        optionsEl.appendChild(optEl);
      });

      nextBtn.style.display = "none";
      updateProgress();
    }

    function updateProgress() {
      // aktif soru dahil değilken doluluk: currentQuestion / total
      const percent = (currentQuestion / questions.length) * 100;
      progressFill.style.width = percent + "%";
    }

    nextBtn.onclick = () => {
      currentQuestion++;
      if (currentQuestion < questions.length) {
        showQuestion();
      } else {
        const percentage = Math.round((score / questions.length) * 100);
        resultEl.textContent = `Quiz bitti! Skorunuz: ${score}/${questions.length} (${percentage}%)`;
        nextBtn.textContent = "Restart";
        nextBtn.onclick = restartQuiz;
      }
    };

    function restartQuiz() {
      currentQuestion = 0;
      score = 0;
      resultEl.textContent = "";
      nextBtn.textContent = "Next Question";
      nextBtn.style.display = "none";
      nextBtn.onclick = () => {
        currentQuestion++;
        if (currentQuestion < questions.length) {
          showQuestion();
        } else {
          const percentage = Math.round((score / questions.length) * 100);
          resultEl.textContent = `Quiz bitti! Skorunuz: ${score}/${questions.length} (${percentage}%)`;
          nextBtn.textContent = "Restart";
          nextBtn.onclick = restartQuiz;
        }
      };
      showQuestion();
    }

    // Özel imleç: akıcı takip (RAF), client koordinatları
    const cursorDot = document.getElementById("cursor-dot");
    let targetX = 0, targetY = 0, curX = 0, curY = 0;
    document.addEventListener("mousemove", (e) => {
      targetX = e.clientX;
      targetY = e.clientY;
    });
    function animateCursor() {
      // küçük bir easing ile yumuşat
      curX += (targetX - curX) * 0.35;
      curY += (targetY - curY) * 0.35;
      cursorDot.style.transform = `translate(${curX - 6}px, ${curY - 6}px)`; // -6 yarıçap dengeleme
      requestAnimationFrame(animateCursor);
    }
    animateCursor();
  </script>
</body>
</html>
